---
authors: "sosukesuzuki"
title: "Prettier 3.7: Improved TypeScript/Flow formatting and better module import handling!"
---

This release includes numerous bug fixes and improvements, with a particular focus on making TypeScript and Flow formatting more consistent and predictable. We've also improved how Prettier handles module imports and enhanced the plugin API.

Key highlights include:

- More consistent formatting for TypeScript and Flow classes and interfaces
- Better handling of long module paths in import/require statements
- Enhanced plugin API with new customization options
- Numerous bug fixes across JavaScript, CSS, HTML, and other languages

<!-- truncate -->

If you appreciate Prettier and would like to support our work, please consider sponsoring us directly via [our OpenCollective](https://opencollective.com/prettier) or by sponsoring the projects we depend on. Thank you for your continued support!

## Highlights

### TypeScript

#### Fix the inconsistent printing between class and interface ([#18094](https://github.com/prettier/prettier/pull/18094), [#18091](https://github.com/prettier/prettier/pull/18091), [#18215](https://github.com/prettier/prettier/pull/18215) by [@fisker](https://github.com/fisker))

This release brings several improvements to make class and interface formatting more consistent.

##### The extra indentation for type parameters in class has been removed

<!-- prettier-ignore -->
```tsx
// Input
interface MarkDef<
  M extends string | Mark = Mark,
  ES extends ExprRef | SignalRef = ExprRef | SignalRef,
>
  extends A, B {}

declare class MarkDef<
  M extends string | Mark = Mark,
  ES extends ExprRef | SignalRef = ExprRef | SignalRef,
>
  implements A, B {}

// Prettier 3.6
interface MarkDef<
  M extends string | Mark = Mark,
  ES extends ExprRef | SignalRef = ExprRef | SignalRef,
> extends A,
    B {}

declare class MarkDef<
    M extends string | Mark = Mark,
    ES extends ExprRef | SignalRef = ExprRef | SignalRef,
  >
  implements A, B {}

// Prettier 3.7
interface MarkDef<
  M extends string | Mark = Mark,
  ES extends ExprRef | SignalRef = ExprRef | SignalRef,
>
  extends A, B {}

declare class MarkDef<
  M extends string | Mark = Mark,
  ES extends ExprRef | SignalRef = ExprRef | SignalRef,
>
  implements A, B {}
```

##### Align interface heritages print with class

<!-- prettier-ignore -->
```tsx
// Input
export interface AreaConfig<ES extends ExprRef | SignalRef>
  extends MarkConfig<ES>, PointOverlayMixins<ES>, LineOverlayMixins<ES> {}

export class AreaConfig<ES extends ExprRef | SignalRef>
  implements MarkConfig<ES>, PointOverlayMixins<ES>, LineOverlayMixins<ES> {}

// Prettier 3.6
export interface AreaConfig<ES extends ExprRef | SignalRef>
  extends MarkConfig<ES>,
    PointOverlayMixins<ES>,
    LineOverlayMixins<ES> {}

export class AreaConfig<ES extends ExprRef | SignalRef>
  implements MarkConfig<ES>, PointOverlayMixins<ES>, LineOverlayMixins<ES> {}

// Prettier 3.7
export interface AreaConfig<ES extends ExprRef | SignalRef>
  extends MarkConfig<ES>, PointOverlayMixins<ES>, LineOverlayMixins<ES> {}

export class AreaConfig<ES extends ExprRef | SignalRef>
  implements MarkConfig<ES>, PointOverlayMixins<ES>, LineOverlayMixins<ES> {}
```

##### Align single heritage print with super class

<!-- prettier-ignore -->
```tsx
// Input
class ExtendsLongOneWithGenerics
  extends
    Bar<
      SomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
      ToBreakLineToBreakLineToBreakLine,
    > {}
class ExtendsLongOneWithGenerics
  implements
    Bar<
      SomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
      ToBreakLineToBreakLineToBreakLine,
    > {}
interface ExtendsLongOneWithGenerics
  extends
    Bar<
      SomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
      ToBreakLineToBreakLineToBreakLine,
    > {}

// Prettier 3.6
class ExtendsLongOneWithGenerics extends Bar<
  SomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
  ToBreakLineToBreakLineToBreakLine
> {}
class ExtendsLongOneWithGenerics
  implements
    Bar<
      SomeLongTypeSomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
      ToBreakLineToBreakLineToBreakLine
    > {}
interface ExtendsLongOneWithGenerics
  extends Bar<
    SomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
    ToBreakLineToBreakLineToBreakLine
  > {}

// Prettier 3.7
class ExtendsLongOneWithGenerics extends Bar<
  SomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
  ToBreakLineToBreakLineToBreakLine
> {}
class ExtendsLongOneWithGenerics implements Bar<
  SomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
  ToBreakLineToBreakLineToBreakLine
> {}
interface ExtendsLongOneWithGenerics extends Bar<
  SomeLongTypeSomeLongTypeSomeLongTypeSomeLongType,
  ToBreakLineToBreakLineToBreakLine
> {}
```

_These changes also affect Flow syntax_

#### Remove unexpected blank line before union types ([#18109](https://github.com/prettier/prettier/pull/18109) by [@jspereiramoura](https://github.com/jspereiramoura), [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```tsx
// Input
type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
  Fooo1000 | Baz2000 | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
type A = // comment
  Fooo1000 | Baz2000 | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;

// Prettier 3.6
type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =

    | Fooo1000
    | Baz2000
    | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
type A = // comment

    | Fooo1000
    | Baz2000
    | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;

// Prettier 3.7
type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
  | Fooo1000
  | Baz2000
  | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
type A =  // comment
  | Fooo1000
  | Baz2000
  | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
```

_This change also affects Flow syntax_

### JavaScript

#### Avoid break `{import,require.resolve,require.resolve.paths,import.meta.resolve}()` with long module name ([#17882](https://github.com/prettier/prettier/pull/17882), [#17908](https://github.com/prettier/prettier/pull/17908) by [@kovsu](https://github.com/kovsu) & [@fisker](https://github.com/fisker))

Long module paths in import and require statements are now formatted more consistently, avoiding unnecessary line breaks that made the code harder to read.

<!-- prettier-ignore -->
```js
// Input
const a = require("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");
const b = require.resolve("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");
const c = require.resolve.paths("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");

const d = await import("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module")
const e = import.meta.resolve("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");

// Prettier 3.6
const a = require("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");
const b = require.resolve(
  "./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module",
);
const c = require.resolve.paths(
  "./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module",
);

const d = await import(
  "./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module"
);
const e = import.meta.resolve(
  "./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module",
);

// Prettier 3.7
const a = require("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");
const b =
  require.resolve("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");
const c = require.resolve
  .paths("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");

const d =
  await import("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");
const e = import.meta
  .resolve("./a/long/long/long/long/long/long/long/long/long/long/long/path/to/module");
```

#### Allow break import attributes into multiple lines ([#17329](https://github.com/prettier/prettier/pull/17329) by [@fisker](https://github.com/fisker))

Import attributes can now break into multiple lines when they don't fit on one line.

<!-- prettier-ignore -->
```jsx
// Input
import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with {
  BABEL_8_BREAKING: "false",
  USE_ESM: "true", IS_STANDALONE: "false" };

// Prettier 3.6
import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with { BABEL_8_BREAKING: "false", USE_ESM: "true", IS_STANDALONE: "false" };

// Prettier 3.7
import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with {
  BABEL_8_BREAKING: "false",
  USE_ESM: "true",
  IS_STANDALONE: "false",
};
```

### API

#### Pass ancestors to `plugin.printer.canAttachComment()` ([#18055](https://github.com/prettier/prettier/pull/18055) by [@fisker](https://github.com/fisker))

This enhancement helps prevent attaching comments to a specific child of a node when that would cause issues.

For example in this JavaScript code `const object = {property};`, the `Identifier` node (`property`) appears as both `Property.key` and `Property.value` in the AST. It can only print once, so if a comment is attached to the non-printable child, the comment will get lost.

Plugins can now avoid this by adding a `canAttachComment` function:

```js
export const canAttachComment = (node, [parent]) =>
  !(
    parent?.type === "Property" &&
    parent.shorthand &&
    parent.key === node &&
    parent.key !== parent.value
  );

export const print = (path, options, print) => {
  const { node } = path;
  switch (node.type) {
    case "Property":
      if (node.shorthand) {
        return print("value");
      }
    // ...
  }
};
```

#### Add support for `plugin.printer.printPrettierIgnored()` ([#18070](https://github.com/prettier/prettier/pull/18070) by [@fisker](https://github.com/fisker))

For a node with a `prettier-ignore` comment, Prettier prints the text of the node directly. However, this may cause problems when the node needs to be parenthesized or needs a leading semicolon to prevent ASI issues in `--no-semi` mode.

Plugins can now add a `printPrettierIgnored()` function to customize how `prettier-ignore`d nodes are printed. This function uses the same signature as [`plugin.printer.print()`](https://prettier.io/docs/plugins#print).

## Other Changes

### Angular

#### Support Angular 20.1 ([#17722](https://github.com/prettier/prettier/pull/17722) by [@fisker](https://github.com/fisker))

Angular 20.1 added support for new assignment operators.

<!-- prettier-ignore -->
```html
<!-- Input -->
<b (click)="
  a   ??= b"></b>

<!-- Prettier 3.6 -->
<b
  (click)="
  a   ??= b"
></b>

<!-- Prettier 3.7 -->
<b (click)="a ??= b"></b>
```

#### Support Angular v20 `@for` track shorthand syntax ([#17862](https://github.com/prettier/prettier/pull/17862) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```html
<!-- Input -->
@for (item of items; track  $index  ) {
  <li>{{ item.name }}</li>
}

<!-- Prettier 3.6 -->
@for (item of items; track  $index  ) {
  <li>{{ item.name }}</li>
}

<!-- Prettier 3.7 -->
@for (item of items; track $index) {
  <li>{{ item.name }}</li>
}
```

#### Unwrap Angular v20 let declaration ([#18047](https://github.com/prettier/prettier/pull/18047) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```html
<!-- Input -->
@let someLongLongLongLongLongLongLongLongLongLongLongLongLongName = someLongLongExpression;

<!-- Prettier 3.6 -->
@let someLongLongLongLongLongLongLongLongLongLongLongLongLongName =
  someLongLongExpression;

<!-- Prettier 3.7 -->
@let someLongLongLongLongLongLongLongLongLongLongLongLongLongName = someLongLongExpression;
```

### CSS

#### Fix extra indent for CSS comma-separated values after a block comment ([#18228](https://github.com/prettier/prettier/pull/18228) by [@seiyab](https://github.com/seiyab))

<!-- prettier-ignore -->
```css
/* Input */
.foo {
  background-image:
    linear-gradient(to top, blue, red 100%),
    /* texture */
    repeating-linear-gradient(90deg, pink, yellow 20px, green 20px, pink 40px),
    repeating-linear-gradient(90deg, pink, yellow 20px, green 20px, pink 40px);
}

/* Prettier 3.6 */
.foo {
  background-image:
    linear-gradient(to top, blue, red 100%),
    /* texture */
      repeating-linear-gradient(90deg, pink, yellow 20px, green 20px, pink 40px),
    repeating-linear-gradient(90deg, pink, yellow 20px, green 20px, pink 40px);
}

/* Prettier 3.7 */
.foo {
  background-image:
    linear-gradient(to top, blue, red 100%),
    /* texture */
    repeating-linear-gradient(90deg, pink, yellow 20px, green 20px, pink 40px),
    repeating-linear-gradient(90deg, pink, yellow 20px, green 20px, pink 40px);
}
```

#### Support CSS anchor positioning ([#17841](https://github.com/prettier/prettier/pull/17841) by [@seiyab](https://github.com/seiyab))

<!-- prettier-ignore -->
```css
/* Input */
.anchored { position: absolute;
  top: anchor(top); left: anchor(right); }

/* Prettier 3.6 */
.anchored {
  position: absolute;
  top: anchor(top);
  left: anchor(right);
}

/* Prettier 3.7 */
.anchored {
  position: absolute;
  top: anchor(top);
  left: anchor(right);
}
```

#### Support `:dir()` pseudo-class ([#17899](https://github.com/prettier/prettier/pull/17899) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```css
/* Input */
.element:dir(  rtl  ) { text-align: right; }

/* Prettier 3.6 */
.element:dir(  rtl  ) {
  text-align: right;
}

/* Prettier 3.7 */
.element:dir(rtl) {
  text-align: right;
}
```

#### Support `:state()` pseudo-class ([#17929](https://github.com/prettier/prettier/pull/17929) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```css
/* Input */
button:state(  checked  ) { color: green; }

/* Prettier 3.6 */
button:state(  checked  ) {
  color: green;
}

/* Prettier 3.7 */
button:state(checked) {
  color: green;
}
```

#### Support CSS color-mix opacity component ([#17938](https://github.com/prettier/prettier/pull/17938) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```css
/* Input */
.element { background: color-mix(in oklch, oklch(none none none /  50%), white); }

/* Prettier 3.6 */
.element {
  background: color-mix(in oklch, oklch(none none none /  50%), white);
}

/* Prettier 3.7 */
.element {
  background: color-mix(in oklch, oklch(none none none / 50%), white);
}
```

#### Support `:open` and `:closed` pseudo-classes ([#18114](https://github.com/prettier/prettier/pull/18114) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```css
/* Input */
details:open { color: green; }
details:closed { color: red; }

/* Prettier 3.6 */
details:open {
  color: green;
}
details:closed {
  color: red;
}

/* Prettier 3.7 */
details:open {
  color: green;
}
details:closed {
  color: red;
}
```

### Flow

#### Fix inconsistent print of Flow `declare type` with long name ([#17681](https://github.com/prettier/prettier/pull/17681) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```jsx
// Input
declare type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBla = string;

// Prettier 3.6
declare type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =

  string;

// Prettier 3.7
declare type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
  string;
```

#### Fix comment position in Flow enum ([#17792](https://github.com/prettier/prettier/pull/17792) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```jsx
// Input
enum E {
  // comment
  A,
}

// Prettier 3.6
enum E {
  A, // comment
}

// Prettier 3.7
enum E {
  // comment
  A,
}
```

### GraphQL

#### Fix trailing comma for object value in GraphQL ([#18214](https://github.com/prettier/prettier/pull/18214) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```graphql
# Input
mutation {
  createUser(user: { name: "John", email: "john@example.com", })
}

# Prettier 3.6
mutation {
  createUser(user: { name: "John", email: "john@example.com" })
}

# Prettier 3.7
mutation {
  createUser(user: { name: "John", email: "john@example.com" })
}
```

### Handlebars

#### Fix formatting of `unless` helper ([#17781](https://github.com/prettier/prettier/pull/17781) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```hbs
{{!-- Input --}}
{{#unless someLongLongLongLongLongLongLongLongLongLongLongLongLongCondition}}
  content
{{/unless}}

{{!-- Prettier 3.6 --}}
{{#unless someLongLongLongLongLongLongLongLongLongLongLongLongLongCondition}}
content
{{/unless}}

{{!-- Prettier 3.7 --}}
{{#unless someLongLongLongLongLongLongLongLongLongLongLongLongLongCondition}}
  content
{{/unless}}
```

#### Fix inconsistent print of inverse block of `if`/`each` helper ([#17856](https://github.com/prettier/prettier/pull/17856) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```hbs
{{!-- Input --}}
{{#if condition}}
{{else}}
  <div></div>
{{/if}}

{{#each items}}
{{else}}
  <div></div>
{{/each}}

{{!-- Prettier 3.6 --}}
{{#if condition}}
{{else}}
<div></div>
{{/if}}

{{#each items}}
{{else}}
  <div></div>
{{/each}}

{{!-- Prettier 3.7 --}}
{{#if condition}}
{{else}}
  <div></div>
{{/if}}

{{#each items}}
{{else}}
  <div></div>
{{/each}}
```

#### Support Handlebars v5 ([#18065](https://github.com/prettier/prettier/pull/18065) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```hbs
{{!-- Input --}}
{{#> myPartial exampleProp=(  lookup  data  "property"  )  }}
  content
{{/ myPartial  }}

{{!-- Prettier 3.6 --}}
{{#> myPartial exampleProp=(  lookup  data  "property"  )  }}
content
{{/ myPartial  }}

{{!-- Prettier 3.7 --}}
{{#> myPartial exampleProp=(lookup data "property")}}
  content
{{/myPartial}}
```

#### Improve print of Handlebars `ContentStatement` ([#18133](https://github.com/prettier/prettier/pull/18133) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```hbs
{{!-- Input --}}
<div class="class-name">
text
</div>

{{!-- Prettier 3.6 --}}
<div class="class-name">
  text
</div>

{{!-- Prettier 3.7 --}}
<div class="class-name">
text
</div>
```

### HTML

#### Support format `allow` attribute of iframe element ([#17879](https://github.com/prettier/prettier/pull/17879) by [@kovsu](https://github.com/kovsu))

<!-- prettier-ignore -->
```html
<!-- Input -->
<iframe allow="layout-animations 'none'; unoptimized-images 'none'; oversized-images 'none'; sync-script 'none'; sync-xhr 'none'; unsized-media 'none';"></iframe>

<!-- Prettier 3.6 -->
<iframe allow="layout-animations 'none'; unoptimized-images 'none'; oversized-images 'none'; sync-script 'none'; sync-xhr 'none'; unsized-media 'none';"></iframe>

<!-- Prettier 3.7 -->
<iframe
  allow="
    layout-animations 'none';
    unoptimized-images 'none';
    oversized-images 'none';
    sync-script 'none';
    sync-xhr 'none';
    unsized-media 'none';
  "
></iframe>
```

#### Fix indentation of `<select>` with long `<optgroup label>` ([#17909](https://github.com/prettier/prettier/pull/17909) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```html
<!-- Input -->
<select>
  <optgroup label="This is a very long label that will cause the select to wrap">
    <option>Option 1</option>
  </optgroup>
</select>

<!-- Prettier 3.6 -->
<select>
  <optgroup
    label="This is a very long label that will cause the select to wrap"
  >
  <option>Option 1</option>
  </optgroup>
</select>

<!-- Prettier 3.7 -->
<select>
  <optgroup
    label="This is a very long label that will cause the select to wrap"
  >
    <option>Option 1</option>
  </optgroup>
</select>
```

### JavaScript

#### Add additional Playwright test functions ([#17876](https://github.com/prettier/prettier/pull/17876) by [@BPScott](https://github.com/BPScott))

Prettier already avoids changing indentation for test functions when you add `.skip` to them. It now also treats the Playwright functions [`test.fixme`](https://playwright.dev/docs/api/class-test#test-fixme), [`test.describe.skip`](https://playwright.dev/docs/api/class-test#test-describe-skip) and [`test.describe.fixme`](https://playwright.dev/docs/api/class-test#test-describe-fixme) similar to `test.skip`.

<!-- prettier-ignore -->
```js
// Input
test.fixme("does something really long and complicated so I have to write a very long name for the test", () => {
  // code
});

test.describe.skip("does something really long and complicated so I have to write a very long name for the test", () => {
  // code
});

test.describe.fixme("does something really long and complicated so I have to write a very long name for the test", () => {
  // code
});

// Prettier 3.6
test.fixme(
  "does something really long and complicated so I have to write a very long name for the test",
  () => {
    // code
  },
);

test.describe.skip(
  "does something really long and complicated so I have to write a very long name for the test",
  () => {
    // code
  },
);

test.describe.fixme(
  "does something really long and complicated so I have to write a very long name for the test",
  () => {
    // code
  },
);

// Prettier 3.7
test.fixme("does something really long and complicated so I have to write a very long name for the test", () => {
  // code
});

test.describe
  .skip("does something really long and complicated so I have to write a very long name for the test", () => {
  // code
});

test.describe
  .fixme("does something really long and complicated so I have to write a very long name for the test", () => {
  // code
});
```

#### Fix inconsistent comment format ([#17723](https://github.com/prettier/prettier/pull/17723) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```jsx
// Input
if (
  true
  // This is a really complicated part of the condition, so we need a big ol'
  // comment here to explain it.
  && flibble.blibble.blobble?.bloo
) {
  doThings();
}

// Prettier 3.6 (--parser=typescript --experimental-operator-position=start)
if (
  true
  && // This is a really complicated part of the condition, so we need a big ol'
  // comment here to explain it.
  flibble.blibble.blobble?.bloo
) {
  doThings();
}

// Prettier 3.6 (--parser=babel --experimental-operator-position=start)
if (
  true
  // This is a really complicated part of the condition, so we need a big ol'
  // comment here to explain it.
  && flibble.blibble.blobble?.bloo
) {
  doThings();
}

// Prettier 3.7
if (
  true
  // This is a really complicated part of the condition, so we need a big ol'
  // comment here to explain it.
  && flibble.blibble.blobble?.bloo
) {
  doThings();
}
```

#### Remove indention in logical expression in `Boolean()` call ([#18087](https://github.com/prettier/prettier/pull/18087) by [@kovsu](https://github.com/kovsu))

Reduces diff when changing a condition to an opposite value, or changing between `!!` and `Boolean()`.

<!-- prettier-ignore -->
```js
// Input
const foo = Boolean(
  a_long_long_condition ||
  a_long_long_long_condition ||
  a_long_long_long_condition
);
const bar = !!(
  a_long_long_condition ||
  a_long_long_long_condition ||
  a_long_long_long_condition
);

// Prettier 3.6
const foo = Boolean(
  a_long_long_condition ||
    a_long_long_long_condition ||
    a_long_long_long_condition,
);
const bar = !!(
  a_long_long_condition ||
  a_long_long_long_condition ||
  a_long_long_long_condition
);

// Prettier 3.7
const foo = Boolean(
  a_long_long_condition ||
  a_long_long_long_condition ||
  a_long_long_long_condition
);
const bar = !!(
  a_long_long_condition ||
  a_long_long_long_condition ||
  a_long_long_long_condition
);
```

#### Fix inconsistent break for array literals ([#18172](https://github.com/prettier/prettier/pull/18172) by [@Dunqing](https://github.com/Dunqing), [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```jsx
// Input
assert.deepStrictEqual(linesCollection.getViewLinesIndentGuides___(-1, -1), [1]);
assert.deepStrictEqual(linesCollection.getViewLinesIndentGuides(-1, -1), [1, 2]);

// Prettier 3.6
assert.deepStrictEqual(linesCollection.getViewLinesIndentGuides___(-1, -1), [
  1,
]);
assert.deepStrictEqual(
  linesCollection.getViewLinesIndentGuides(-1, -1),
  [1, 2],
);

// Prettier 3.7
assert.deepStrictEqual(
  linesCollection.getViewLinesIndentGuides___(-1, -1),
  [1],
);
assert.deepStrictEqual(
  linesCollection.getViewLinesIndentGuides(-1, -1),
  [1, 2],
);
```

### Less

#### Support Less v4.3 new features ([#17820](https://github.com/prettier/prettier/pull/17820) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```less
// Input
@import (  optional  ) "file.less";
.mixin()  when  ( lightness( @a )  > 50% ) { color: black; }

// Prettier 3.6
@import (  optional  ) "file.less";
.mixin()  when  ( lightness( @a )  > 50% ) {
  color: black;
}

// Prettier 3.7
@import (optional) "file.less";
.mixin() when (lightness(@a) > 50%) {
  color: black;
}
```

#### Support Less lookup operator ([#17983](https://github.com/prettier/prettier/pull/17983) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```less
// Input
.widget { @  { property }: #0ee; background: @  { bg }; }

// Prettier 3.6
.widget {
  @  { property }: #0ee;
  background: @  { bg };
}

// Prettier 3.7
.widget {
  @{property}: #0ee;
  background: @{bg};
}
```

### Markdown

#### Support GitHub strikethrough syntax ([#17813](https://github.com/prettier/prettier/pull/17813) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
````md
<!-- Input -->
~~strikethrough~~

<!-- Prettier 3.6 -->
\~~strikethrough\~~

<!-- Prettier 3.7 -->
~~strikethrough~~
````

#### Print definition when the identifier is empty ([#17965](https://github.com/prettier/prettier/pull/17965) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
````md
<!-- Input -->
[]: https://example.com

<!-- Prettier 3.6 -->
<!-- Nothing printed -->

<!-- Prettier 3.7 -->
[]: https://example.com
````

#### Improve break for long URL in link ([#18010](https://github.com/prettier/prettier/pull/18010) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
````md
<!-- Input -->
[link](https://github.com/prettier/prettier/issues/1234567890123456789012345678901234567890)

<!-- Prettier 3.6 -->
[link](https://github.com/prettier/prettier/issues/1234567890123456789012345678901234567890)

<!-- Prettier 3.7 -->
[link](
  https://github.com/prettier/prettier/issues/1234567890123456789012345678901234567890
)
````

### MDX

#### Improve print of JSX in MDX ([#17996](https://github.com/prettier/prettier/pull/17996) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
````mdx
<!-- Input -->
<div>
  Some text
</div>

<!-- Prettier 3.6 -->
<div>Some text</div>

<!-- Prettier 3.7 -->
<div>
  Some text
</div>
````

### SCSS

#### Fix indentation of pseudo-selector in SCSS ([#17836](https://github.com/prettier/prettier/pull/17836) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```scss
/* Input */
.parent {
  &:hover { color: blue; }
}

/* Prettier 3.6 */
.parent {
&:hover {
  color: blue;
}
}

/* Prettier 3.7 */
.parent {
  &:hover {
    color: blue;
  }
}
```

#### Support SCSS placeholder selector starting with digit ([#17903](https://github.com/prettier/prettier/pull/17903) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```scss
/* Input */
%1foo { color: red; }

/* Prettier 3.6 */
/* SyntaxError */

/* Prettier 3.7 */
%1foo {
  color: red;
}
```

### TypeScript

#### Fix inconsistent comment printing between `typescript` and `flow` parser ([#18110](https://github.com/prettier/prettier/pull/18110) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```tsx
// Input
interface A {
  a: // Comment
    B;
  b: // Comment
  	| Fooo1000
    | Baz2000
    | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
  c: // Comment
  	& Fooo1000
    & Baz2000
    & BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
}

// Prettier 3.6 (--parser=typescript)
interface A {
  a: // Comment
  B;
  b: // Comment
  | Fooo1000
    | Baz2000
    | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
  c: // Comment
  Fooo1000 &
    Baz2000 &
    BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
}

// Prettier 3.6 (--parser=flow)
interface A {
  a: B; // Comment
  b:  // Comment
    | Fooo1000
    | Baz2000
    | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
  c: Fooo1000 & // Comment
    Baz2000 &
    BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
}

// Prettier 3.7 (Same output for both parsers)
interface A {
  a: B; // Comment
  b:  // Comment
    | Fooo1000
    | Baz2000
    | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
  c: // Comment
  Fooo1000 &
    Baz2000 &
    BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
}
```

### YAML

#### Avoid breaking line before the first mapping in YAML ([#17843](https://github.com/prettier/prettier/pull/17843) by [@fisker](https://github.com/fisker))

<!-- prettier-ignore -->
```yaml
# Input
- foo: bar

# Prettier 3.6
-
  foo: bar

# Prettier 3.7
- foo: bar
```

### CLI

#### Deprecate `cache` option (#18124 by [@fisker](https://github.com/fisker))

The `--cache` option will be removed in Prettier v4. It is already non-functional in v3.

### API

#### Export `OptionSource` type ([#17679](https://github.com/prettier/prettier/pull/17679) by [@fisker](https://github.com/fisker))

The `OptionSource` type is now exported from the Prettier API, making it easier to work with the type system when using Prettier programmatically.

#### Allow `plugins` to be function ([#17860](https://github.com/prettier/prettier/pull/17860) by [@fisker](https://github.com/fisker))

Plugins can now be specified as a function that returns an array of plugins. This allows for lazy loading and more dynamic plugin configurations.

#### Support `trailingComma` option in browser version ([#18072](https://github.com/prettier/prettier/pull/18072) by [@fisker](https://github.com/fisker))

The `trailingComma` option is now fully supported in the browser version of Prettier.
